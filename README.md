# Открытый голос/Openvoice

Блокчеин сеть для проведения открытых и тайных голосований, а так-же сопровождения договоров доверия.

## Сущности

### Администратор

Аккаунт от имени которых создана группа либо голосование, или Аккаунты которым создатель группы дал соответствующие права. Администраторы имеют право приглашать в группу участников и исключать из группы.

### Аккаунт

Поля:
 - name - текстовое поле
 - data - текстовое поле
 - user_id - идентификатор учётки. При наследовании передаётся неизменным
 - public_key - результат вычисления хэшфункции F(name, data, password)
 - parent - ссылка на старую версию аккаунта. Например, если пользователь сменил имя или прочие данные
 
 
 TODO определиться, хранить ли список групп в самом аккаунте, или как отдельные записи о вступлении/входе из группы

### Группа

Поля:
 - name
 - type - open/privat
 - user_key
 - admin_key

Создаётся администратором. Администратор создающий группу имеер право выдавать административные права другим аккаунтам. Группа может быть открытая и закрытая.
В открытую группу может вступить любой желающий
В закрытую, только по приглашению администратора

TODO описать механизм вступления в группу по ключу от админа

### Голосование

#### Запись о создании голосования

Поля:
 - name
 - type - open/incognito
 - decloration - текстовое поле с описанием голосования
 - options - варианты ответа
 - groups - список групп принимающих участие в голосовании
 - start_time - время начала голосования
 - end_time - время завершения голосования
 - vote_id - уникальный идентификатор голосования

TODO может стоит заложить возможность голосования с выбором нескольких вариантов ответа

#### Запись о голосе (об участии в голосовании)

Поля:
 - user_id - идентификатор аккаунта, который проголосовал
 - vout_id - идентификатор голосования
 - option - вариант ответа
 - time_point - время голосования

### Договор доверия

#### Запись о создании договора

Поля:
 - user_id - идентификатор Доверенного (того, кто публикует договор)
 - text
 - type - open/private к открытому договору может присоединиться, любой аккаунт входящий в группу. К закрытому - только с согласия Доверенного
 - public key
 
#### Запись о присоединении к договору

#### Запись о выходе/исключении из договра

#### Запись о подтверждении присоединения

## Сценарии использования

### Регистрация

### Работа с группой

### Голосование открытое

### Голосование тайное

### Работа с Договором доверия

Например, есть небольшой посёлок. В сети Openvoice создана группа в которую входят все жители посёлка. В посёлке есть "Совет жителей". Каждый член совета является постоянным представителем группы жителей. Не обязательно непосредственных соседей, просто жителей посёлка с которыми у него совпадают взгляды. Допустим житель посёлка по имени Алексей решил стать участником совета. Для этого:
1) для подтверждения своего права участвовать в совете, Алексей регистрирует на Openvoice "Договор доверия" (trast_contract)
  1) указывает, что договор доступен только группе посёлка
  2) тип договора privat, т.е. присоедениться к договору можно только после подтверждения Алексея
  3) текст договора - оговорен советом посёлка, чтоб у всех участников совета он был одинаковый
  4) нажимает зарегистрировать
2) после того, как смайнился и подписан блок, в который попал контракт, он считается опубликованным
3) у всех жителей посёлка в приложении появляется уведомление, что Алексей создал Договор доверия
4) желающий присоединиться, нажимает "Присоединиться"
5) в сеть попадает запись о том, что аккаунт N желает присоединиться к договору Алексея
6) Алексей, получив уведомление нажимает "Подтвердить"
7) в сеть попадает запись о том, что Алексей подтвердил, после того как пакет с этой записью будет смайнен договор считается подписанным

Кто-то передумал и решил выйти из договора:
1) в приложении выбирает этот договор, у казывает, что выходит из него
2) после того как пакет с этой записью будет смайнен, договор считается расторгнутым
3) Алексей получил уведомление, что договор расторгнут

Алексей решил расторгнуть договор с кем-то из присоединившихся:
1) в приложении выбирает этот договор
2) в списке участников договора выбирает нужного и нажимает "Расторгнуть"
3) после того как пакет с этой записью будет смайнен, договор считается расторгнутым
4) соответствующий аккаунт получил уведомление, что договор расторгнут

Алексей решил закрыть договор:
1) в приложении выбирает этот договор, у казывает, что закрывает его
2) после того как пакет с этой записью будет смайнен, договор считается закрытым
3) все кто входил в договор получают уведомление, что договор закрыт
