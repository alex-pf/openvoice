# Открытый голос/Openvoice

Система договоров представления интересов и публичных голосований на основе смарт контрактов сети Ethernum (Эфирум)

## Сущности

name|название|описание
--------|-------|-------
account|учётная запись|Учётная запись
club|группа|Смарт контракт содержащий спиок аккаунтов входящих в группу
owner|владелец|Учётная запись от имени которой создан контракт
trast_contract|договор|Смарт контракт одной стороной которого является владелец, второй присоединившиеся учётные записи (их владельцы)
vote|голосование|Смарт контракт содержащий описание, варианты ответа, период и список групп, участники которых могут принять участие
user|пользователь|Человек пользующийся системой, может иметь неограниченное количество аккаунтов
miner|майнер|узел подписывающий очередной пакет

## Сценарии использования

До появления специализированного приложения, в качестве пользовательского интерфейса рассматриваются кошельки Ethernum поддерживающие работу со смарт контрактами.

### Регистрация

Стандартная процедура создания аккаунта в приложении кошельке

### Работа с группой

Группа - это смарт контракт имеющий содержащий список аккаунтов. Любой пользователь может "постучаться в группу". Владаелец подтверждает вступление в группу.

№|исполнитель|действие|результат|
-|-----------|--------|---------|
1|owner|Добавляет контракт club||
2|user|От имени нужного аккаунта, запускает метод addme|адрес аккаунта появляется в контракте, в списке желающих присоединиться|
3|owner|Запускает метод appruve c указанием списка аккаунтов принимаемых в группу|




### Голосование

№|исполнитель|действие|результат|
-|-----------|--------|---------|
1|owner|Добавляет контракт vote. Контракт содержит в себе, тему, варианты ответов (каждый варинат - это отдельный метод), список групп которым доступно голосование, период голосования|Контракт появляется в сети|
2|user|Запускает метод контракта соответствующий его выбору|голос направлен в поддержку выбранного варианта|
3|owner/user|Запускает метод get_result|в ответ получается результат на текущий момент



### Работа с Договором доверия

Возможная сидуация: есть небольшой посёлок. В посёлке есть "Совет жителей". Есть контракт club, в который входят все жители посёлка Каждый участник совета является постоянным представителем группы жителей. Этот факт подтверждается наличием Договора в Openvoice, владельцем поторого является участник совета. Форма договора у всех одинаковая
Допустим житель посёлка решил стать участником совета. Создовая договор он становится его владельцем.

#### Регистрация договора

№|исполнитель|действие|результат|
-|-----------|--------|---------|
1|Владалец|Создаёт договор, указывает группу, указывает что договор приватный, отправляет|В блок попадает запись о создании договора
2|Майнер|Подписывает пакет, в котором находится договор|Подписанный пакет попадает в блокчейн

#### Присоединение к договору

№|исполнитель|действие|результат|
-|-----------|--------|---------|
1|Пользователь|Создаёт запись, от имени аккаунта входящего в нужную группу, о желании присоединиться к договору - подпись
2|Майнер|Подписывает пакет, в котором находится запись|Заявка на присоединение к договору опубликована
3|Владелец/Администратор|Создаёт запись подтверждающую, что пользователь присоединился к договору
4|Майнер|Подписывает пакет, в котором находится запись|Теперь в цепочке присутствуют все три записи: договор, подпись пользователя, подтверждение владельца договора

#### Выход из договора, по инициативе пользователя

№|исполнитель|действие|результат|
-|-----------|--------|---------|
1|Пользователь|Создаёт запись, от имени нужного аккаунта, о желании выйти из договора
2|Майнер|Подписывает пакет, в котором находится запись|После подписания пакета, договор считается расторгнутым


#### Выход из договора, по инициативе владельца/администратора

№|исполнитель|действие|результат|
-|-----------|--------|---------|
1|Владелец/Администратор|Создаёт запись об исключении аккаунта из договора
2|Майнер|Подписывает пакет, в котором находится запись|После подписания пакета, договор считается расторгнутым, в отношении указанного аккаунта

#### Закрытие договора

№|исполнитель|действие|результат|
-|-----------|--------|---------|
1|Владелец/Администратор|Создаёт запись закрытии договора
2|Майнер|Подписывает пакет, в котором находится запись|После подписания пакета, договор считается закрытым

Договор может быть закрыт автоматически, без создания отдельных записей, если в нём указан период действия.

